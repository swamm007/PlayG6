# G6分享

## 项目背景
 应用中心-模版发布里面需要做一个依赖关系配置的需求  

## 项目难点
  普通的画div肯定实现不了，找了一下比较好用的库  

## 方案选择  对比自研的（蓝鲸）和 G6  

 *****dickens推荐的，但是我后边也对比了竞品  
   
 1、项目类型  
 x6 (重编辑)  何为重编辑（拖拽图形、创建边，锚点连线，流程图类）  
 G6(重可视化分析)  数据渲染，交互少一点  
 2、数据量大小   
200个节点以上 优选G6 G6是基于canvas的性能更加优秀 X6是基于HTML的，较大规模上性能不佳  
 如果数据量不大，但是组成节点的图元过多（如距形状，文字），也推荐G6
 
## G6简介
## demo展示  
   <a>http://localhost:3000/</a>
## 核心概念
1. 图 Graph  
   1.1  初始化和渲染
   - 在 G6 中，Graph 对象是图的载体，它包含了图上的所有元素（节点、边等），同时挂载了图的相关操作（如交互监听、元素操作、渲染等）。  
   - 代码展示
2. 图形  
   2.1 图形和属性   
   描述： 
  Shape 指 G6 中的图形、形状，它可以是圆形、矩形、路径等。它一般与 G6 中的节点、边、Combo 相关。G6 中的每一种节点/边/ Combo 由一个或多个 Shape 组成。节点、边、Combo、标签文本的配置都会被体现到对应的图形上。 


  内置图形： 
   - circle  
   - rect  
   - elipse  
   - image  
   - text 
  属性：  
  - fill        设置用于填充绘画的颜色、渐变或模式
  - stroke      设置用于笔触的颜色、渐变或模式
  - lineWidth   描边宽度
  - cursor      鼠标样式

  
   2.2 关键图形keyshape  

   keyshape  每一个节点都应该有一个唯一的关键图形，用来响应样式，设置链接的锚点等

   2.3 图形分组Group  
   描述： 图形分组针对 图形 Shape 层次的分组；是用来组合图形对象的容器。在 group  上添加变换（例如剪裁、旋转、放缩、平移等）会应用到其所有的子元素上。在 group  上添加属性（例如颜色、位置等）会被其所有的子元素继承；

3. 图元素  
   3.1 节点  
     * 内置节点  
     * 自定义节点  
     * 节点的链接点 anchorPoints  
     
   3.2 边
     * 内置边  
     * 自定义边  
4. 图布局  
   4.1 内置布局  
   4.2 自定义布局  
5. 交互与事件  
   5.1 监听与绑定事件  
   5.2 内置交互行为  
   5.3 自定义交互行为  
   5.4 交互模式 Mode

## 踩坑之旅  
1. 注册自定义节点时候选择用 对象形式、类html格式、还是社区封装的React组件形式。 
2. 自定义节点时候对于需要循环渲染内置节点时候，对于当前节点的坐标的计算以及整个图形高度的动态计算。
3. 自定义节点数据更新后，无法让当前数据改变的图形重新绘制。
4. 生成两个图形链接边的时候，边的首端乱飘，如何做到固定锚点，而且排除掉不应该被链接的锚点.
5. 鼠标移入出现删除符号，怎么做（寻找自定义节点内相关图形的方法的摸索）
